<html>
<head>
<meta charset="UTF-8">
<link href="tailwind.min.css" rel="stylesheet" type="text/css">
<script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js/build/three.js"></script>
<script src="wglmakie.js"></script>
<link href="markdown.css" rel="stylesheet" type="text/css">
<link href="styled.css" rel="stylesheet" type="text/css">

<script>
    window.js_call_session_id = '97a8a481-eca4-4602-baf4-000068c27773';
    window.websocket_proxy_url = '';
</script>
<script src="msgpack.min.js"></script>
<script src="core.js"></script>
<script>
function __on_document_load__(){
    try {
        


function init_function(__data_dependencies) {
            {const value = deserialize_js(__data_dependencies[0]);
                          registered_observables['613186644192690273'] = value;
                          // update all onjs callbacks
                          run_js_callbacks('613186644192690273', value);}
        {const value = false;
                          registered_observables['10425271025405090103'] = value;
                          // update all onjs callbacks
                          run_js_callbacks('10425271025405090103', value);}
        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10778"]')), 'step', value));
        register_onjs(func, '5438391333288023759');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10778"]')), 'max', value));
        register_onjs(func, '326712190127128550');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10778"]')), 'min', value));
        register_onjs(func, '18091099746753105120');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10778"]')), 'value', value));
        register_onjs(func, '2096114731931868983');
        }

        {
        const func = ((html)=> update_dom_node((document.querySelector('[data-jscall-id="10779"]')), html));
        register_onjs(func, '11050750486717955518');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10780"]')), 'step', value));
        register_onjs(func, '9265917463143534483');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10780"]')), 'max', value));
        register_onjs(func, '11960628393139856243');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10780"]')), 'min', value));
        register_onjs(func, '4994431752089077941');
        }

        {
        const func = (value=> update_node_attribute((document.querySelector('[data-jscall-id="10780"]')), 'value', value));
        register_onjs(func, '10554590066238829786');
        }

        {
        const func = ((html)=> update_dom_node((document.querySelector('[data-jscall-id="10781"]')), html));
        register_onjs(func, '8529944934395472432');
        }

        {
        const func = (function setup([scenes, duplicates]){
    const canvas = (document.querySelector('[data-jscall-id="10784"]'))
    const renderer = WGLMakie.threejs_module(canvas, "14687027119406503199", 600, 600)
    WGLMakie.set_duplicate_references(duplicates)
    const three_scenes = scenes.map(WGLMakie.deserialize_scene)
    const cam = new THREE.PerspectiveCamera(45, 1, 0, 100)
    console.log(three_scenes)
    WGLMakie.start_renderloop(renderer, three_scenes, cam)

    function get_plot(plot_uuid) {
        for (const idx in three_scenes) {
            const plot = three_scenes[idx].getObjectByName(plot_uuid)
            if (plot) {
                return plot
            }
        }
        return undefined;
    }

    function add_plot(scene, plot) {
        const mesh = WGLMakie.deserialize_plot(plot);
    }
    const context = {
        three_scenes,
        add_plot,
        get_plot,
        renderer
    }
    put_on_heap('551', context);
}
);
        register_onjs(func, '9219353186479809814');
        }

        {const value = deserialize_js(__data_dependencies[1]);
                          registered_observables['9219353186479809814'] = value;
                          // update all onjs callbacks
                          run_js_callbacks('9219353186479809814', value);}
        {
        const func = (function update_size(canvas_width){
    const context = get_heap_object('551');
    const w_h = deserialize_js(canvas_width);
    context.renderer.setSize(w_h[0], w_h[1]);
    var canvas = (document.querySelector('[data-jscall-id="10784"]'))
    canvas.style.width = w_h[0];
    canvas.style.height = w_h[1];
});
        register_onjs(func, '9910669885820196214');
        }

        {put_on_heap('552', window); undefined;}
        get_heap_object('552')['dont_even_try_to_reconnect'] = true;
        {
        const func = (function (val){
    const messages = window.independent_states['2096114731931868983'][val]
    // not all states trigger events!
    if (messages){
        process_message(messages)
    }
});
        register_onjs(func, '2096114731931868983');
        }

        {
        const func = (function (val){
    const messages = window.independent_states['10554590066238829786'][val]
    // not all states trigger events!
    if (messages){
        process_message(messages)
    }
});
        register_onjs(func, '10554590066238829786');
        }

        {
        const func = (function (val){
    const messages = window.independent_states['10425271025405090103'][val]
    // not all states trigger events!
    if (messages){
        process_message(messages)
    }
});
        register_onjs(func, '10425271025405090103');
        }

        get_heap_object('552')['independent_states'] = __data_dependencies[2];
        get_heap_object('552')['dependent_states'] = __data_dependencies[3];

}
init_from_file(init_function, "97a8a481-eca4-4602-baf4-000068c27773.msgpack");

    } catch (e) {
        websocket_send({
            msg_type: JSDoneLoading,
            exception: String(e),
            message: "Error during initialization",
            stacktrace: e.stack
        });
    }
};

</script>
</head>
<body onload=__on_document_load__()>
    <div id="application-dom" data-jscall-id="10786">
  <div data-jscall-id="10769">
    <div class="markdown-body" data-jscall-id="10785">
      <h1 data-jscall-id="10770">Ocean Simulation</h1>
      <p data-jscall-id="10771">Simulation of instability of a horizontal density gradient in a rotating channel using 256x512x128 grid points running on a GPU. A similar process called baroclinic instability acting on basin-scale temperature gradients fills the oceans with eddies, especially in regions with large temperature gradients. These eddies are the primary way the ocean transports heat, carbon dioxide, organic matter, and nutrients on a large scale.</p>
      <p data-jscall-id="10774">Simulation created with 
        <a href="https://github.com/CliMA/Oceananigans.jl/" data-jscall-id="10772">Oceananigans.jl</a> which is part of the 
        <a href="https://github.com/CliMA" data-jscall-id="10773">CliMA</a> project.
      </p>
      <p data-jscall-id="10776">
        <a href="https://github.com/SimonDanisch/JSServe.jl/blob/master/examples/oceananigans.jl" data-jscall-id="10775">source code</a>
      </p>
      <hr data-jscall-id="10777" />
      <p data-jscall-id="10782">absorption: 
        <div class="w-64 p-2 items-center  flex flex-row" data-jscall-id="10766">
          <input step="0.1" max="10.0" min="1.0" data-jscall-id="10778" value="5.0" oninput="update_obs('2096114731931868983', parseFloat(value))" type="range" />
          <span class="p-1" data-jscall-id="10765">
            <span data-jscall-id="10779">5.0</span>
          </span>
        </div> time: 
        <div class="w-64 p-2 items-center  flex flex-row" data-jscall-id="10768">
          <input step="1" max="64" min="1" data-jscall-id="10780" value="1" oninput="update_obs('10554590066238829786', parseFloat(value))" type="range" />
          <span class="p-1" data-jscall-id="10767">
            <span data-jscall-id="10781">1</span>
          </span>
        </div>
      </p>
      <input onclick="{&#10;            console.log(this.last_value);&#10;            const value = this.last_value;&#10;            update_obs('10425271025405090103', !value);&#10;            this.last_value = !value;&#10;        }" class="p-1 rounded m-2" data-jscall-id="10783" value="flip colormap" type="button" />
      <canvas height="600" data-jscall-id="10784" width="600"></canvas>
    </div>
  </div>
</div>
</body>
</html>

